#!/usr/bin/env bash
# Script that stops 4-to_infinity_and_beyond without using kill/killall

# Find PID using pgrep (cleaner than ps | grep)
pid=$(pgrep -f "4-to_infinity_and_beyond")

if [ -n "$pid" ]; then
  # Quietly set score to allow safe termination
  echo "0" > "/proc/$pid/oom_score_adj" 2>/dev/null
  # Open file descriptor to its stdin
  exec 3<>"/proc/$pid/fd/0" || exit 1
  # Send 'exit' to the process's stdin (terminates the while loop)
  echo "exit" >&3
  # Close fd
  exec 3>&-
fi

